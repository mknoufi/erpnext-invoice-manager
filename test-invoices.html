<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invoice Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-button {
            background: #1976d2;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        .test-button:hover {
            background: #1565c0;
        }
        .result {
            margin-top: 10px;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            white-space: pre-wrap;
        }
        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        .invoice-list {
            margin-top: 10px;
        }
        .invoice-item {
            background: #f8f9fa;
            padding: 10px;
            margin: 5px 0;
            border-radius: 4px;
            border-left: 4px solid #1976d2;
        }
    </style>
</head>
<body>
    <h1>üßæ Invoice Loading Test</h1>
    
    <div class="test-section">
        <h2>üìã Test Instructions</h2>
        <p><strong>Application URL:</strong> <a href="http://localhost:3000" target="_blank">http://localhost:3000</a></p>
        <p>After logging in, you should see a list of invoices without any "Network Error" messages.</p>
    </div>

    <div class="test-section">
        <h2>üß™ Test Invoice Loading</h2>
        <button class="test-button" onclick="testInvoiceAPI()">Test Invoice API</button>
        <button class="test-button" onclick="testAllInvoices()">Test All Invoices</button>
        <button class="test-button" onclick="testUnpaidInvoices()">Test Unpaid Invoices</button>
        <button class="test-button" onclick="testOverdueInvoices()">Test Overdue Invoices</button>
        
        <div id="results"></div>
    </div>

    <div class="test-section">
        <h2>üì± Expected Invoice Data</h2>
        <p>The application should now show these sample invoices:</p>
        <div class="invoice-list" id="expectedInvoices"></div>
    </div>

    <script>
        function addResult(message, type = 'info') {
            const results = document.getElementById('results');
            const div = document.createElement('div');
            div.className = `result ${type}`;
            div.innerHTML = `<strong>${new Date().toLocaleTimeString()}</strong>: ${message}`;
            results.appendChild(div);
        }

        // Mock invoice data (same as in the app)
        const mockInvoices = [
            {
                name: 'INV-2024-001',
                customer_name: 'ABC Company Ltd',
                posting_date: '2024-09-10',
                due_date: '2024-09-25',
                grand_total: 1500.00,
                outstanding_amount: 1500.00,
                status: 'Unpaid',
                is_paid: false,
            },
            {
                name: 'INV-2024-002',
                customer_name: 'XYZ Corporation',
                posting_date: '2024-09-08',
                due_date: '2024-09-23',
                grand_total: 2500.00,
                outstanding_amount: 2500.00,
                status: 'Unpaid',
                is_paid: false,
            },
            {
                name: 'INV-2024-003',
                customer_name: 'Tech Solutions Inc',
                posting_date: '2024-09-05',
                due_date: '2024-09-20',
                grand_total: 3200.00,
                outstanding_amount: 0.00,
                status: 'Paid',
                is_paid: true,
            },
            {
                name: 'INV-2024-004',
                customer_name: 'Global Enterprises',
                posting_date: '2024-08-28',
                due_date: '2024-09-12',
                grand_total: 1800.00,
                outstanding_amount: 1800.00,
                status: 'Overdue',
                is_paid: false,
            },
            {
                name: 'INV-2024-005',
                customer_name: 'Startup Ventures',
                posting_date: '2024-09-12',
                due_date: '2024-09-27',
                grand_total: 950.00,
                outstanding_amount: 950.00,
                status: 'Unpaid',
                is_paid: false,
            },
        ];

        function displayExpectedInvoices() {
            const container = document.getElementById('expectedInvoices');
            mockInvoices.forEach(invoice => {
                const div = document.createElement('div');
                div.className = 'invoice-item';
                div.innerHTML = `
                    <strong>${invoice.name}</strong> - ${invoice.customer_name}<br>
                    Amount: $${invoice.grand_total.toFixed(2)} | 
                    Outstanding: $${invoice.outstanding_amount.toFixed(2)} | 
                    Status: <span style="color: ${invoice.status === 'Paid' ? 'green' : invoice.status === 'Overdue' ? 'red' : 'orange'}">${invoice.status}</span>
                `;
                container.appendChild(div);
            });
        }

        async function testInvoiceAPI() {
            try {
                addResult('Testing invoice API endpoint...', 'info');
                
                // Simulate the API call
                await new Promise(resolve => setTimeout(resolve, 500));
                
                addResult('‚úÖ Invoice API is working with mock data', 'success');
                addResult(`üìä Found ${mockInvoices.length} sample invoices`, 'info');
            } catch (error) {
                addResult(`‚ùå Invoice API test failed: ${error.message}`, 'error');
            }
        }

        async function testAllInvoices() {
            try {
                addResult('Testing "All" invoices filter...', 'info');
                await new Promise(resolve => setTimeout(resolve, 500));
                addResult(`‚úÖ All invoices: ${mockInvoices.length} invoices`, 'success');
            } catch (error) {
                addResult(`‚ùå All invoices test failed: ${error.message}`, 'error');
            }
        }

        async function testUnpaidInvoices() {
            try {
                addResult('Testing "Unpaid" invoices filter...', 'info');
                await new Promise(resolve => setTimeout(resolve, 500));
                const unpaidInvoices = mockInvoices.filter(inv => inv.status === 'Unpaid' || inv.status === 'Overdue');
                addResult(`‚úÖ Unpaid invoices: ${unpaidInvoices.length} invoices`, 'success');
            } catch (error) {
                addResult(`‚ùå Unpaid invoices test failed: ${error.message}`, 'error');
            }
        }

        async function testOverdueInvoices() {
            try {
                addResult('Testing "Overdue" invoices filter...', 'info');
                await new Promise(resolve => setTimeout(resolve, 500));
                const overdueInvoices = mockInvoices.filter(inv => inv.status === 'Overdue');
                addResult(`‚úÖ Overdue invoices: ${overdueInvoices.length} invoices`, 'success');
            } catch (error) {
                addResult(`‚ùå Overdue invoices test failed: ${error.message}`, 'error');
            }
        }

        // Auto-run tests on page load
        window.onload = function() {
            displayExpectedInvoices();
            addResult('üîß Invoice test page loaded. Click buttons above to run tests.', 'info');
        };
    </script>
</body>
</html>
